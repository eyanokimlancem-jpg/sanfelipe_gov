<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>San Felipe | Login</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(12px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.8s ease-out'
          }
        }
      }
    }
  </script>
</head>

<body class="min-h-screen flex items-center justify-center bg-red-50">

  <div class="flex w-full max-w-5xl overflow-hidden rounded-2xl shadow-2xl animate-fade-in bg-gradient-to-br from-red-900 to-red-700">

    <!-- LEFT PANEL -->
    <div class="w-2/5 flex items-center justify-center bg-white/10 p-10">
      <img src="../assets/logo.png" alt="San Felipe Logo" class="max-w-full" />
    </div>

    <!-- RIGHT PANEL -->
    <div class="w-3/5 p-12 text-white">
      <h2 class="text-3xl font-bold mb-6">Welcome Back!</h2>
      <p class="text-white/80 mb-10">Login to access your San Felipe account.</p>

      <!-- LOGIN FORM -->
      <form id="loginForm" class="space-y-6">

        <!-- Username -->
        <div class="relative">
          <input
            type="text"
            id="username"
            required
            placeholder=" "
            class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                   bg-transparent border border-white/40
                   focus:outline-none focus:ring-2 focus:ring-amber-300
                   transition-all duration-300"
          />
          <label
            for="username"
            class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                   transition-all duration-300 ease-in-out
                   peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                   peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                   peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white"
          >
            Username
          </label>
        </div>

        <!-- Password -->
        <div class="relative">
          <input
            type="password"
            id="password"
            required
            placeholder=" "
            class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                   bg-transparent border border-white/40
                   focus:outline-none focus:ring-2 focus:ring-amber-300
                   transition-all duration-300"
          />
          <label
            for="password"
            class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                   transition-all duration-300 ease-in-out
                   peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                   peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                   peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white"
          >
            Password
          </label>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="w-full mt-4 py-3 rounded-lg bg-amber-300 text-red-900 font-bold
                 transition-all duration-300 hover:bg-amber-400 hover:scale-105
                 active:scale-95 shadow-lg"
        >
          Login
        </button>
      </form>

      <!-- Switch to Sign Up -->
      <p class="mt-6 text-sm text-white/80 text-center">
        Don't have an account?
        <a href="index.html"
           class="text-amber-300 hover:text-amber-400 font-semibold transition">
           Sign up here
        </a>
      </p>
    </div>
  </div>

  <script>
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;
      const users = JSON.parse(localStorage.getItem("users")) || [];

      // Default admin
      if (username === "ADMIN" && password === "123456") {
        localStorage.setItem("currentUser", JSON.stringify({
          firstName: "Admin",
          role: "Admin"
        }));
        window.location.href = "dashboard.html";
        return;
      }

      const user = users.find(u => u.username === username && u.password === password);

      if (!user) {
        alert("Invalid credentials");
        return;
      }

      if (user.role === "Staff" && !user.approved) {
        alert("Staff account pending admin approval");
        return;
      }

      localStorage.setItem("currentUser", JSON.stringify(user));
      window.location.href = "dashboard.html";
    });
  </script>

</body>
</html>
