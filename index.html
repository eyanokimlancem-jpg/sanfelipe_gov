<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>San Felipe | Sign Up</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(12px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.8s ease-out'
          }
        }
      }
    }
  </script>
</head>

<body class="min-h-screen flex items-center justify-center bg-red-50">

  <div class="flex flex-col md:flex-row w-full max-w-5xl overflow-hidden rounded-2xl shadow-2xl animate-fade-in bg-gradient-to-br from-red-900 to-red-700">

   <div class="w-full md:w-2/5 flex items-center justify-center bg-white/10 p-8 md:p-10">
      <img src="../assets/logo.png" alt="San Felipe Logo" class="max-w-[180px] md:max-w-full" />
    </div>

   <div class="w-full md:w-3/5 p-8 md:p-12 text-white">
      <h2 id="formTitle" class="text-3xl font-bold mb-6">Create Account — Citizen</h2>

      <!-- ROLE SELECTION -->
      <div class="flex gap-3 mb-6">
        <label class="flex-1 cursor-pointer">
          <input type="radio" name="role" value="Citizen" checked hidden class="peer">
          <div class="text-center py-2 rounded-lg border border-white/40
            peer-checked:bg-amber-300 peer-checked:text-red-900">
            Citizen
          </div>
        </label>

        <label class="flex-1 cursor-pointer">
          <input type="radio" name="role" value="Staff" hidden class="peer">
          <div class="text-center py-2 rounded-lg border border-white/40
            peer-checked:bg-amber-300 peer-checked:text-red-900">
            Staff
          </div>
        </label>
      </div>

      <!-- SIGNUP FORM -->
      <form id="signupForm" class="space-y-6">

        <!-- Full Name -->
        <div class="relative">
          <input type="text" id="fullname" required placeholder=" " class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                 bg-transparent border border-white/40
                 focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300" />
          <label for="fullname" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                 transition-all duration-300 ease-in-out
                 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                 peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                 peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white">
            Full Name
          </label>
        </div>

        <!-- Email -->
        <div class="relative">
          <input type="email" id="email" required placeholder=" " class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                 bg-transparent border border-white/40
                 focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300" />
          <label for="email" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                 transition-all duration-300 ease-in-out
                 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                 peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                 peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white">
            Email Address
          </label>
        </div>

        <!-- Username -->
        <div class="relative">
          <!-- Note: placeholder=" " is required for peer-placeholder-shown to work -->
          <input type="text" id="username" required placeholder=" " class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                 bg-transparent border border-white/40
                 focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300" />
          <label for="username" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                 transition-all duration-300 ease-in-out
                 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                 peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                 peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white">
            Username
          </label>
        </div>

        <!-- Password -->
        <div class="relative">
          <input type="password" id="password" required placeholder=" " class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                 bg-transparent border border-white/40
                 focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300" />
          <label for="password" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                 transition-all duration-300 ease-in-out
                 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                 peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                 peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white">
            Password
          </label>
        </div>

        <!-- Confirm Password -->
        <div class="relative">
          <input type="password" id="confirm-password" required placeholder=" " class="peer w-full px-2 pt-2 pb-2 rounded-lg text-white placeholder-transparent
                 bg-transparent border border-white/40
                 focus:outline-none focus:ring-2 focus:ring-amber-300 transition-all duration-300" />
          <label for="confirm-password" class="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 text-base
                 transition-all duration-300 ease-in-out
                 peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-white/60 peer-placeholder-shown:text-base
                 peer-focus:-top-3 peer-focus:left-4 peer-focus:text-sm peer-focus:text-white
                 peer-[&:not(:placeholder-shown)]:-top-3 peer-[&:not(:placeholder-shown)]:left-4 peer-[&:not(:placeholder-shown)]:text-sm peer-[&:not(:placeholder-shown)]:text-white">
            Confirm Password
          </label>
        </div>

        <!-- Terms and Conditions -->
        <div class="flex items-start gap-2 text-sm text-white/80">
          <input type="checkbox" id="agree" class="mt-1 w-4 h-4 accent-amber-300 cursor-pointer" />
          <label for="agree" class="cursor-pointer select-none">
            I agree to the
            <a href="terms.pdf" target="_blank" class="text-amber-300 hover:underline">Terms and Conditions</a>
            and
            <a href="privacy.pdf" target="_blank" class="text-amber-300 hover:underline">Privacy Policy</a>.
          </label>
        </div>

        <!-- Submit -->
        <button type="submit" class="w-full mt-4 py-3 rounded-lg bg-amber-300 text-red-900 font-bold
               transition-all duration-300 hover:bg-amber-400 hover:scale-105 active:scale-95 shadow-lg">
          Sign Up
        </button>
      </form>

      <p class="mt-4 text-sm text-red-200">Role-based permissions will be assigned after registration.</p>

      <!-- Switch to Login -->
      <p class="mt-3 text-sm text-white/80 text-center">
        Already have an account?
        <a href="login.html" class="text-amber-300 hover:text-amber-400 font-semibold transition">Log in here</a>
      </p>
    </div>
  </div>

  <script>
    // Update heading when switching roles
    const roleInputs = document.querySelectorAll('input[name="role"]');
    const title = document.getElementById('formTitle');
    roleInputs.forEach(input => {
      input.addEventListener('change', () => {
        title.textContent = `Create Account — ${input.value}`;
      });
    });

    // Signup form handler
    document.getElementById("signupForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const fullname = document.getElementById("fullname").value.trim();
      const username = document.getElementById("username").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      const confirm = document.getElementById("confirm-password").value;
      const role = document.querySelector("input[name='role']:checked").value;
      const agree = document.getElementById("agree").checked;

      if (!agree) {
        alert("You must agree to the terms and conditions.");
        return;
      }

      if (password !== confirm) {
        alert("Passwords do not match!");
        return;
      }

      const users = JSON.parse(localStorage.getItem("users")) || [];

      if (users.find(u => u.username === username)) {
        alert("Username already exists");
        return;
      }

      users.push({
        fullname,
        firstName: fullname.split(" ")[0] || fullname,
        username,
        email,
        password,
        role,
        approved: role === "Citizen",
        date: new Date().toLocaleString()
      });

      localStorage.setItem("users", JSON.stringify(users));
      alert("Account created successfully! Please log in.");
      window.location.href = "login.html";
    });
  </script>

</body>
</html>


